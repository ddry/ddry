// Generated by CoffeeScript 2.4.1
(function() {
  /*
   * Command line interface core
   */
  'use strict';
  var commandList, configurer, kernel;

  commandList = require('./command_list');

  configurer = require('./configurer');

  kernel = require('./kernel');

  module.exports = function(params) {
    var command, commandParams, e;
    try {
      if (typeof process.env.DDRY_CLI === 'undefined') {
        return configurer.serveSpec();
      }
      process.env.DDRY_PREFIX = kernel.setPrefix(process.env.DDRY_DEV, process.env.NPM_ROOT);
      if (!params.length) {
        kernel.exit();
        return true;
      }
      [command, ...commandParams] = params;
      command = commandList.aliases[command] || command;
      if (commandList.names.indexOf(command) !== -1) {
        kernel.process(command, commandParams);
        return true;
      }
      kernel.cliScope(params);
      return true;
    } catch (error) {
      e = error;
      console.log(e.message);
      throw new Error;
    }
  };

}).call(this);
